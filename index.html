<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Taxi Booking â€” Mobile Form</title>
  <style>
    :root{--accent:#0b7;--bg:#ffffff;--text:#111}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,#f7f9fb,#ffffff);display:flex;align-items:center;justify-content:center;padding:20px}
    .card{width:100%;max-width:520px;background:#fff;border-radius:12px;box-shadow:0 6px 24px rgba(20,30,60,0.08);padding:18px}
    h1{font-size:18px;margin:0 0 14px}
    .subtitle{font-size:14px;color:#555;margin-bottom:12px}
    label{display:block;margin:12px 0 6px;font-size:15px}
    label strong{font-weight:700}
    input,select,textarea{width:100%;box-sizing:border-box;padding:12px 14px;border:1px solid #e6eef6;border-radius:10px;font-size:15px}
    select{padding:10px 12px}
    .row{display:flex;gap:10px}
    .row > *{flex:1}
    .btn{display:block;width:100%;padding:12px;border-radius:10px;border:0;background:var(--accent);color:#022;font-weight:700;font-size:16px;margin-top:14px}
    .note{font-size:13px;color:#666;margin-top:8px}
    .footer{font-size:12px;color:#888;text-align:center;margin-top:10px}
    @media (max-width:420px){.card{padding:14px}h1{font-size:16px}}
  </style>
</head>
<body>
  <div class="card">
    <!-- Top heading that must also appear in WhatsApp message -->
    <h1 id="topHeading"><strong>*Taxi Booking Request*</strong></h1>

    <p class="subtitle">Fill the form and tap <em>Send to WhatsApp</em> to open WhatsApp with your booking details.</p>

    <form id="taxiForm">

      <!-- New fields: Name and Mobile No (appearing after heading in form) -->
      <label for="custName"><strong>*Name:*</strong></label>
      <input id="custName" name="custName" type="text" placeholder="Your full name" required />

      <label for="custMobile"><strong>*Mobile no:*</strong></label>
      <input id="custMobile" name="custMobile" type="tel" placeholder="e.g. 9178xxxxxxx" required />

      <label for="date"><strong>*Pick date:*</strong></label>
      <input id="date" name="date" type="date" required />

      <label for="time"><strong>*Pick up time:*</strong></label>
      <div class="row">
        <select id="hour" required>
          <option value="">Hour</option>
          <option>1</option><option>2</option><option>3</option><option>4</option>
          <option>5</option><option>6</option><option>7</option><option>8</option>
          <option>9</option><option>10</option><option>11</option><option>12</option>
        </select>
        <select id="minute" required>
          <option value="">Min</option>
          <option>00</option>
          <option>15</option>
          <option>30</option>
          <option>45</option>
        </select>
        <select id="ampm" required>
          <option value="">AM/PM</option>
          <option>AM</option>
          <option>PM</option>
        </select>
      </div>

      <label for="pickup"><strong>*Pick up location:*</strong></label>
      <input id="pickup" name="pickup" type="text" placeholder="Enter pick up address or landmark" required />

      <label for="drop"><strong>*Drop location:*</strong></label>
      <input id="drop" name="drop" type="text" placeholder="Enter drop address or landmark" required />

      <button type="submit" class="btn">Send to WhatsApp</button>

      <p class="note">This opens WhatsApp (Personal or Business) on mobile. If you are on desktop it will open WhatsApp Web if available.</p>
    </form>

    <!-- Footer line removed as requested -->
  </div>

  <script>
    (function(){
      const form = document.getElementById('taxiForm');
      const dateInput = document.getElementById('date');
      const hourSel = document.getElementById('hour');
      const minSel = document.getElementById('minute');
      const ampmSel = document.getElementById('ampm');
      const custName = document.getElementById('custName');
      const custMobile = document.getElementById('custMobile');
      const topHeading = document.getElementById('topHeading');

      const phoneNumber = '917878781984';
      const monthsShort = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];

      function formatDateToDDMMMYYYY(value){
        if(!value) return '';
        const parts = value.split('-');
        if(parts.length !== 3) return value;
        const y = parts[0], m = parseInt(parts[1],10) - 1, d = parts[2];
        const month = monthsShort[m] || '';
        // Ensure day is two-digit
        const day = d.length === 1 ? '0'+d : d;
        return day + '-' + month + '-' + y;
      }

      function formatFieldLabel(label){
        return '*' + label + '*';
      }

      form.addEventListener('submit', function(e){
        e.preventDefault();

        // Include heading exactly as shown (including asterisks)
        let message = topHeading.textContent.trim() + '\n\n';

        // Customer details
        message += formatFieldLabel('Name:') + ' ' + (custName.value || '') + '\n';
        message += formatFieldLabel('Mobile no:') + ' ' + (custMobile.value || '') + '\n\n';

        // Date
        const rawDate = dateInput.value || '';
        const date = formatDateToDDMMMYYYY(rawDate);
        message += formatFieldLabel('Pick date:') + ' ' + date + '\n';

        // Time
        const hour = hourSel.value;
        const min = minSel.value;
        const ampm = ampmSel.value;
        const time = (hour && min && ampm) ? hour + ':' + min + ' ' + ampm : '';
        message += formatFieldLabel('Pick up time:') + ' ' + time + '\n';

        // Locations
        message += formatFieldLabel('Pick up location:') + ' ' + (document.getElementById('pickup').value || '') + '\n';
        message += formatFieldLabel('Drop location:') + ' ' + (document.getElementById('drop').value || '') + '\n\n';

        message += 'Please confirm.';

        const encoded = encodeURIComponent(message);
        const waLink = 'https://wa.me/' + phoneNumber + '?text=' + encoded;
        const appLink = 'whatsapp://send?phone=' + phoneNumber + '&text=' + encoded;

        // Open app link first (mobile), fallback to web
        window.location.href = appLink;
        setTimeout(function(){ window.location.href = waLink; }, 700);
      });

      // Optional: prefill today's date
      try{
        const today = new Date();
        const yyyy = today.getFullYear();
        let mm = today.getMonth() + 1; if(mm < 10) mm = '0' + mm;
        let dd = today.getDate(); if(dd < 10) dd = '0' + dd;
        // set value as yyyy-mm-dd
        dateInput.value = yyyy + '-' + mm + '-' + dd;
      }catch(e){/* ignore */}

    })();
  </script>
</body>
</html>
